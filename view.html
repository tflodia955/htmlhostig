<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; }
        .loader-container { display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; background: #0f172a; color: white; }
    </style>
</head>
<body>
    <div id="loader" class="loader-container">
        <div>Please wait... Loading Page</div>
    </div>

    <!-- User ka HTML yahan iframe mein load hoga -->
    <iframe id="viewer" style="width:100%; height:100vh; border:none; display:none;"></iframe>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzUiKL1oK0BFX5XwajRlbvoeESr6TLVtWrnu0Rtn3mi3eZ2qYHMtQMfZuG3kmHVyNtW/exec";
        
        async function loadPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');

            if (!id) {
                document.body.innerHTML = "No Page ID provided.";
                return;
            }

            try {
                const response = await fetch(`${SCRIPT_URL}?id=${id}`);
                const data = await response.json();

                if (data.html) {
                    const iframe = document.getElementById('viewer');
                    const loader = document.getElementById('loader');
                    
                    // HTML content ko iframe mein inject karna (Banner bypass karne ke liye)
                    iframe.srcdoc = data.html;
                    iframe.onload = () => {
                        loader.style.display = 'none';
                        iframe.style.display = 'block';
                    };
                } else {
                    document.body.innerHTML = "Page not found.";
                }
            } catch (err) {
                document.body.innerHTML = "Error loading page.";
            }
        }

        loadPage();
    </script>
</body>
</html>
